{"ast":null,"code":"import React from \"react\";\nimport Butter from \"buttercms\";\n\nclass StoreModel extends React.Component {\n  constructor() {\n    super();\n    this.butter = Butter('2fa7babaa7064c23b2cb90171957b2add0333e77');\n    this.subscribers = [];\n    this.state = {\n      basket: [],\n      data: {}\n    };\n  }\n\n  async componentDidMount() {\n    const resp = await this.butter.page.retrieve('*', 'front-page');\n    this.setState(resp.data);\n  }\n\n  addObserver(callback) {\n    this.subscribers.push(callback);\n  }\n\n  removeObserver(callback) {\n    callback = this.subscribers.filter(o => o !== callback);\n  }\n\n  notifyObservers(whatHappened) {\n    this.subscribers.forEach(function (callback) {\n      callback(whatHappened);\n    });\n  }\n\n  addToBasket(product) {\n    let basket = this.state.basket;\n    this.setState({\n      basket: [...(basket + product)]\n    });\n  }\n\n  removeFromBasket(productid) {}\n\n  getBasket() {\n    return this.state.basket;\n  }\n\n  getBasketItemNumber() {\n    return this.state.basket.length;\n  }\n\n  getCMSdata() {\n    let resp = new Promise(resolve => {\n      return this.butter.page.retrieve('*', 'front-page');\n    });\n    return resp;\n  }\n\n}\n\nexport default StoreModel;","map":{"version":3,"sources":["/Users/simonsundin/Documents/GitHub/projekt_gr-n/src/model_more/model.js"],"names":["React","Butter","StoreModel","Component","constructor","butter","subscribers","state","basket","data","componentDidMount","resp","page","retrieve","setState","addObserver","callback","push","removeObserver","filter","o","notifyObservers","whatHappened","forEach","addToBasket","product","removeFromBasket","productid","getBasket","getBasketItemNumber","length","getCMSdata","Promise","resolve"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAEA,MAAMC,UAAN,SAAyBF,KAAK,CAACG,SAA/B,CAAyC;AACvCC,EAAAA,WAAW,GAAG;AACZ;AAEA,SAAKC,MAAL,GAAcJ,MAAM,CAAC,0CAAD,CAApB;AACA,SAAKK,WAAL,GAAmB,EAAnB;AAGA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,MAAM,EAAC,EAAT;AACXC,MAAAA,IAAI,EAAC;AADM,KAAb;AAID;;AAED,QAAMC,iBAAN,GAA2B;AAEzB,UAAMC,IAAI,GAAG,MAAM,KAAKN,MAAL,CAAYO,IAAZ,CAAiBC,QAAjB,CAA0B,GAA1B,EAA+B,YAA/B,CAAnB;AACA,SAAKC,QAAL,CAAcH,IAAI,CAACF,IAAnB;AACD;;AAEDM,EAAAA,WAAW,CAACC,QAAD,EAAW;AACpB,SAAKV,WAAL,CAAiBW,IAAjB,CAAsBD,QAAtB;AACD;;AAEDE,EAAAA,cAAc,CAACF,QAAD,EAAW;AACvBA,IAAAA,QAAQ,GAAG,KAAKV,WAAL,CAAiBa,MAAjB,CAAyBC,CAAD,IAAOA,CAAC,KAAKJ,QAArC,CAAX;AACD;;AAEDK,EAAAA,eAAe,CAACC,YAAD,EAAe;AAC5B,SAAKhB,WAAL,CAAiBiB,OAAjB,CAAyB,UAAUP,QAAV,EAAoB;AAC3CA,MAAAA,QAAQ,CAACM,YAAD,CAAR;AACD,KAFD;AAGD;;AAEDE,EAAAA,WAAW,CAACC,OAAD,EAAS;AAClB,QAAIjB,MAAM,GAAG,KAAKD,KAAL,CAAWC,MAAxB;AACA,SAAKM,QAAL,CAAc;AAAEN,MAAAA,MAAM,EAAG,CAAC,IAAGA,MAAM,GAAGiB,OAAZ,CAAD;AAAX,KAAd;AACD;;AAEDC,EAAAA,gBAAgB,CAACC,SAAD,EAAW,CAE1B;;AAEDC,EAAAA,SAAS,GAAE;AACT,WAAO,KAAKrB,KAAL,CAAWC,MAAlB;AACD;;AAEDqB,EAAAA,mBAAmB,GAAE;AACnB,WAAO,KAAKtB,KAAL,CAAWC,MAAX,CAAkBsB,MAAzB;AACD;;AAEDC,EAAAA,UAAU,GAAE;AACV,QAAIpB,IAAI,GAAG,IAAIqB,OAAJ,CAAYC,OAAO,IAAI;AAAC,aAAO,KAAK5B,MAAL,CAAYO,IAAZ,CAAiBC,QAAjB,CAA0B,GAA1B,EAA+B,YAA/B,CAAP;AAAoD,KAA5E,CAAX;AACA,WAAOF,IAAP;AACD;;AAtDsC;;AA0DzC,eAAeT,UAAf","sourcesContent":["import React from \"react\";\nimport Butter from \"buttercms\";\n\nclass StoreModel extends React.Component {\n  constructor() {\n    super();\n    \n    this.butter = Butter('2fa7babaa7064c23b2cb90171957b2add0333e77')\n    this.subscribers = [];\n    \n    \n    this.state = { basket:[],\n      data:{}\n      \n    };\n  }\n\n  async componentDidMount () {\n    \n    const resp = await this.butter.page.retrieve('*', 'front-page')\n    this.setState(resp.data)\n  }\n\n  addObserver(callback) {\n    this.subscribers.push(callback);\n  }\n\n  removeObserver(callback) {\n    callback = this.subscribers.filter((o) => o !== callback);\n  }\n\n  notifyObservers(whatHappened) {\n    this.subscribers.forEach(function (callback) {\n      callback(whatHappened);\n    });\n  }\n\n  addToBasket(product){\n    let basket = this.state.basket;\n    this.setState({ basket : [...basket + product]})\n  }\n\n  removeFromBasket(productid){\n\n  }\n\n  getBasket(){\n    return this.state.basket;\n  }\n\n  getBasketItemNumber(){\n    return this.state.basket.length\n  }\n\n  getCMSdata(){\n    let resp = new Promise(resolve => {return this.butter.page.retrieve('*', 'front-page')});\n    return resp\n  }\n\n}\n\nexport default StoreModel;\n"]},"metadata":{},"sourceType":"module"}
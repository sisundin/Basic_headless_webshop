{"ast":null,"code":"import React from \"react\";\n\nclass StoreModel extends React.Component {\n  constructor(props) {\n    super();\n    this.subscribers = [];\n    this.state = {\n      basket: props.basket\n    };\n    console.log(this.state);\n  }\n\n  addObserver(callback) {\n    this.subscribers.push(callback);\n  }\n\n  removeObserver(callback) {\n    callback = this.subscribers.filter(o => o !== callback);\n  }\n\n  notifyObservers(whatHappened) {\n    this.subscribers.forEach(function (callback) {\n      callback(whatHappened);\n    });\n  }\n\n  addToBasket(prod, size = \"n/a\", amount = 1) {\n    let productthatexisted = this.state.basket.filter(produc => deepEqual(produc.prod, prod) === true || produc.sizeselected === size);\n    let bask = this.state.basket.filter(produc => deepEqual(produc.prod, prod) === false || produc.sizeselected !== size);\n    let productObject = {\n      prod,\n      sizeselected: size,\n      amountorderd: amount\n    };\n\n    if (productthatexisted.length !== 0) {\n      let combinedamount = amount + productthatexisted[0].amountorderd;\n      productObject = {\n        prod,\n        sizeselected: size,\n        amountorderd: combinedamount\n      };\n    }\n\n    console.log(\"bask\");\n    console.log(bask);\n    console.log(\"productthatexisted\");\n    console.log(productthatexisted);\n    console.log(\"productObject\");\n    console.log(productObject);\n    this.state.basket = [...bask, productObject];\n    console.log(this.state);\n    localStorage.setItem(\"The_coolest_store\", JSON.stringify({\n      basket: [...this.state.basket]\n    }));\n  }\n\n  removeFromBasket(productid) {}\n\n  clearBasket() {\n    this.state.basket = [];\n    console.log(this.state);\n    localStorage.setItem(\"The_coolest_store\", JSON.stringify({\n      basket: []\n    }));\n  }\n\n  getBasket() {\n    return [...this.state.basket];\n  }\n\n  getBasketItemNumber() {\n    return this.state.basket.length;\n  }\n\n}\n\nconst modelString = localStorage.getItem(\"The_coolest_store\");\nlet modelObject = JSON.parse(modelString);\nmodelObject ? console.log(\"User data detected\") : modelObject = {\n  basket: []\n};\nconst storeModel = new StoreModel(modelObject);\nexport default storeModel;\n\nfunction deepEqual(object1, object2) {\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (const key of keys1) {\n    const val1 = object1[key];\n    const val2 = object2[key];\n    const areObjects = isObject(val1) && isObject(val2);\n\n    if (areObjects && !deepEqual(val1, val2) || !areObjects && val1 !== val2) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isObject(object) {\n  return object != null && typeof object === 'object';\n}","map":{"version":3,"sources":["/Users/simonsundin/Documents/GitHub/projekt_gr-n/src/model_more/model.js"],"names":["React","StoreModel","Component","constructor","props","subscribers","state","basket","console","log","addObserver","callback","push","removeObserver","filter","o","notifyObservers","whatHappened","forEach","addToBasket","prod","size","amount","productthatexisted","produc","deepEqual","sizeselected","bask","productObject","amountorderd","length","combinedamount","localStorage","setItem","JSON","stringify","removeFromBasket","productid","clearBasket","getBasket","getBasketItemNumber","modelString","getItem","modelObject","parse","storeModel","object1","object2","keys1","Object","keys","keys2","key","val1","val2","areObjects","isObject","object"],"mappings":"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","sourcesContent":["import React from \"react\";\n\n\nclass StoreModel extends React.Component {\n  constructor(props) {\n    super();\n    this.subscribers = [];\n    this.state = {basket: props.basket};\n    console.log(this.state);\n  }\n\n  \n\n  addObserver(callback) {\n    this.subscribers.push(callback);\n  }\n\n  removeObserver(callback) {\n    callback = this.subscribers.filter((o) => o !== callback);\n  }\n\n  notifyObservers(whatHappened) {\n    this.subscribers.forEach(function (callback) {\n      callback(whatHappened);\n    });\n  }\n\n  addToBasket(prod, size=\"n/a\", amount=1){\n    let productthatexisted = this.state.basket.filter(produc => deepEqual(produc.prod, prod) === true || produc.sizeselected === size);\n    let bask = this.state.basket.filter(produc => deepEqual(produc.prod, prod) ===false || produc.sizeselected !== size);\n    let productObject = {prod , sizeselected:size, amountorderd:amount }\n    if (productthatexisted.length !== 0){\n      let combinedamount = amount + productthatexisted[0].amountorderd \n      productObject = {prod , sizeselected:size, amountorderd:combinedamount}\n    }\n    console.log(\"bask\")\n    console.log(bask);\n    console.log(\"productthatexisted\")\n    console.log(productthatexisted)\n    console.log(\"productObject\")\n    console.log(productObject);\n    this.state.basket = [...bask, productObject];\n    console.log(this.state);\n    localStorage.setItem(\"The_coolest_store\", \n        JSON.stringify( {basket:[...this.state.basket]}))\n  }\n\n  removeFromBasket(productid){\n\n  }\n\n   clearBasket(){\n    this.state.basket = [];\n    console.log(this.state);\n\n    localStorage.setItem(\"The_coolest_store\", JSON.stringify({basket:[]}))\n  \n  }\n\n  getBasket(){\n    return [...this.state.basket];\n  }\n\n  getBasketItemNumber(){\n    \n    return this.state.basket.length;\n  }\n\n\n \n\n}\n\nconst modelString= localStorage.getItem(\"The_coolest_store\");\nlet modelObject= JSON.parse(modelString);\nmodelObject?console.log(\"User data detected\"): modelObject= {basket:[]}\nconst storeModel = new StoreModel(modelObject);\nexport default storeModel;\n\nfunction deepEqual(object1, object2) {\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (const key of keys1) {\n    const val1 = object1[key];\n    const val2 = object2[key];\n    const areObjects = isObject(val1) && isObject(val2);\n    if (\n      areObjects && !deepEqual(val1, val2) ||\n      !areObjects && val1 !== val2\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isObject(object) {\n  return object != null && typeof object === 'object';\n}\n"]},"metadata":{},"sourceType":"module"}